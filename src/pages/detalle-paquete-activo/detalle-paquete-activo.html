<!--
  Generated template for the DetalleSesionesCompradasPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title *ngIf="accionPaquete == 'activo'">Paquete Activo</ion-title>
    <ion-title *ngIf="accionPaquete == 'cancelar'">Cancelar Paquete</ion-title>
  </ion-navbar>

</ion-header>


<ion-content>
  <div [ngSwitch]="accionPaquete">
    <div *ngSwitchCase="'activo'">
      <xph-chart-sesiones [paquete]="paqueteActivo"></xph-chart-sesiones>
      <xph-sesiones-compradas [compradetallesesiones]="paqueteActivo.compradetallesesiones" (clickDetalleSesion)="detalleSesion($event)" (clickCancelarSesion)="cancelarSesion($event)" (clickReprogramarSesion)="reprogramarSesion($event)" (clickProgramarSesion)="programarSesion($event)"></xph-sesiones-compradas>
    </div>
    <div *ngSwitchCase="'cancelar'">
      <ion-card>
        <ion-card-header mode="ios">
          {{ paqueteActivo.nombre }}
        </ion-card-header>
        <ion-card-content>
          {{ paqueteActivo.detalle }}
        </ion-card-content>

        <ion-list>
          <ion-item>
            <ion-avatar item-start>
              <img [src]="paqueteActivo.prestador.imagePath|pathImagen">
            </ion-avatar>
            <h2>Prestador</h2>
            <h3>{{ paqueteActivo.prestador.nombres }} {{ paqueteActivo.prestador.primerApellido }} {{ paqueteActivo.prestador.segundoApellido }}</h3>
          </ion-item>
          <ion-item>
            Sesiones por Programar
            <div item-end>{{paqueteActivo.sesionPorAgendar}}</div>
          </ion-item>
          <ion-item>
            Sesiones Programadas
            <div item-end>{{paqueteActivo.sesionAgendadas}}</div>
          </ion-item>
          <ion-item>
            Sesiones Finalizadas
            <div item-end>{{paqueteActivo.sesionFinalizadas}}</div>
          </ion-item>
        </ion-list>

        <form [formGroup]="myForm" (ngSubmit)="guardar()">
          <ion-row>
            <ion-col class="resetmarginpadding" col-12>
              <ion-textarea class="myInput" [attr.rows]="5" placeholder="Describa motivo para cancelar este paquete" autocomplete="on" autocorrect="on"  formControlName="motivoCancelacion">
              </ion-textarea>
            </ion-col>
            <ion-col class="resetmarginpadding">
              <button ion-button full color="danger" class="resetmarginpadding" [disabled]="!myForm.valid" type="submit">Cancelar Paquete </button>
            </ion-col>
          </ion-row>

        </form>

      </ion-card>
    </div>
  </div>
</ion-content>

<ion-footer>
  <ion-segment [(ngModel)]="accionPaquete" color="primary">
    <ion-segment-button value="activo">
      Activo
    </ion-segment-button>
    <ion-segment-button value="cancelar">
      Cancelar
    </ion-segment-button>
  </ion-segment>
</ion-footer>
